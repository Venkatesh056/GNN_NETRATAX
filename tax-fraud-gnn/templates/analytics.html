<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NETRATAX - Analytics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navy-override.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body data-theme="light">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="NETRATAX Logo" class="navbar-logo">
                <h1>NETRATAX</h1>
            </div>
            <ul class="navbar-menu">
                <li><a href="/landing" class="nav-link">Home</a></li>
                <li><a href="/dashboard" class="nav-link">Dashboard</a></li>
                <li><a href="/companies" class="nav-link">Companies</a></li>
                <li><a href="/analytics" class="nav-link active">Analytics</a></li>
                <li><a href="/advanced-analytics" class="nav-link">Advanced Analytics</a></li>
                <li><a href="/upload" class="nav-link">Upload</a></li>
                <li><a href="/chatbot" class="nav-link">Chatbox</a></li>
            </ul>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <span class="theme-icon-light">‚òÄÔ∏è</span>
                    <span class="theme-icon-dark">üåô</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div class="dashboard-header">
            <h2>Network Analytics</h2>
            <p>Transaction network analysis and pattern detection powered by Graph Neural Networks</p>
        </div>

        <!-- Key Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <h4>Total Nodes</h4>
                <p class="stat-value" id="totalNodes">-</p>
            </div>
            <div class="stat-card">
                <h4>Total Edges</h4>
                <p class="stat-value" id="totalEdges">-</p>
            </div>
            <div class="stat-card">
                <h4>Network Density</h4>
                <p class="stat-value" id="networkDensity">-</p>
            </div>
            <div class="stat-card">
                <h4>Avg. Fraud Prob.</h4>
                <p class="stat-value" id="avgFraudProb">-</p>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-row">
            <div class="chart-container">
                <h3>Top 10 Invoice Senders</h3>
                <div id="topSendersChart" style="height: 500px;"></div>
            </div>

            <div class="chart-container">
                <h3>Top 10 Invoice Receivers</h3>
                <div id="topReceiversChart" style="height: 500px;"></div>
            </div>
        </div>

        <!-- Information Panel -->
        <div class="card">
            <h3>About GNN-Based Fraud Detection</h3>
            <div class="info-content">
                <p><strong>How the Model Works:</strong></p>
                <ul>
                    <li><strong>Node Features:</strong> Company turnover, invoice sent/received counts</li>
                    <li><strong>Edge Features:</strong> Invoice amounts, ITC claimed</li>
                    <li><strong>Architecture:</strong> Graph Convolutional Network (3 layers)</li>
                    <li><strong>Detection:</strong> Identifies anomalous patterns in transaction networks</li>
                </ul>

                <p><strong>Fraud Patterns Detected:</strong></p>
                <ul>
                    <li>Shell company networks (rapid creation/dissolution)</li>
                    <li>Circular invoice chains (money laundering)</li>
                    <li>Disproportionate ITC claims</li>
                    <li>Unusual transaction patterns</li>
                    <li>Connected fraud rings</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
</body>
</html>
